<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../230328/quotes.css">
</head>
<body>
    <div id="result">
        <div class="quote"></div>
        <div class="author"></div>
    </div>
    <script src="../230328/solution.js"></script>
</body>
</html>
fetch api란
    서버에 자료를 요청하거나 자료를 받아올때 사용하는 api
    XMLHttpRequest 대신한다     //구형
    fetch는 프로미스를 반환

fetch(위치, 옵션)
위치:자료가 있는 url이나 파일이름
옵션:get이나 post같은 요청 방식 지정(따로 지정하지 않으면 get 메서드 사용)

예- fetch(student-2.json)
then()을 사용해 결과 표시                                                                   fetch(student-2.json).then(console.log)
XMLHttpRequest객체 대신 fetch API 사용해 보자

1. XMLHttpRequest(XHR)
가장 기본적인 방법으로 클라이언트가서버에 HTTP 요청을 보내고 서버가 응답하는 방식을 사용
비동기적 요청을 처리하기 위한 onreadystatechange 이벤트 핸들러나 readystatechange 이벤트 사용
XHR은 웹 브라우저에서 널리 지원되면 기존 브라우저에서도 작동

2. fetch
es6의 기능으로 promise 기반의 비동기적 http를 요청하는 방식
xhr보다 간단하게 요청을 보낼수 있으며
response 객체를 반환하는 promise 반환
fetch api CORS 요청및 리다이렉션(다시반환)을 자동으로 처리하는 등의 기능 제공

CORS
자원에서 다른 출처에 있는 자원에 접근하도록 하느 개념입니다 직역하면 교차되는 출처 자원들의 공유
교차 출처 리소스 공유(Cross-Origin Resource Sharing, CORS)
추가 HTTP 헤ㅓ를 사용해 한출처에서 실행중인 웹 애플리케이션이 다른 출처의 선택한
자원에 접근할 수 있는 권한 부여하도록 브라우저에 알려주는 체제

교차 출처 리소스 공유(Cross-Origin Resource Sharing, CORS)는 보안상의 
이유로 동일한 출철(same-origin)를 가지지 
않는 다른 도메인 간의 http 요청이 기본적으로 찬단되느 것을 허용하기 위해 
서버에서 클라이언트에게 추가적인 http헤더를 전송하도록 지시하는 체제

추가 http 헤더란 Access-Control-Allow-Origin, Access-Control-Allow-Methods,
Access-Control-Allow-Header 등의 Cors 관련 헤더를 의미

서버에서 클라이언트로 전송되는 http응답 헤더입니다 html 속성은 태그안에 지정되는 속성으로
예를 들어 img 태그의 src 속성과 같은 것들이 있다
추가 http 헤더는 서버에서 응답 헤더로 전송되는 것이다






출처란?
http://github.io:443/tech/svelte?page=1#Origin
프로토콜(http:) 호스트(github.io) 포트(443) 패스(tech/svelte) 쿼리스프링(?page=1) 프래그먼트(Origin)

포트까지 같으면 동일 출처이며 만약 패스부터 다르다고 해도 동일출처임
포트는 생략가능하나 만약 생략이 되었다면 기본값인 80이 생략이 되어있을 가능성이 많다

위의 구성요소 중에서 protocol + host + port 3가지가 같으면 동일 출처(Origin)라고 함 
포트는 생략 가능

예- http://example.com/app1/index.html
예- http://example.com/app2/index.html
protocol, host, port(생략)이 같으며 path(위에 app1,app2) 부터 다르므로 동일 출처임

http:/example.com
http:/example.com:8080      80,8080으로 포트가 다름 동일출처가 아님
다른 출처 요청일 경우 cors 정책에 준수해 요청해야만 정상적인 응답 받음







다른 출처요청의 위험성

img, script frame video audio 등이 웹 에 등장하면서 페이지 로딩 이후에 
브라우저에서 이러한 하위 자원들을 가져올수 있게 됨 그러므로 동일출처 다른 출처
모두 호출이 가능하게 됨

3. Axios
promise 기반의 http 클라이언트 라이브러리 ㅇ비니다
브라우저와 node.js 환경에서 모두 사용할 수 있다
비동기적 요청을 처리하기 위해 then() catch()메소드를 이용합니다
보안을 위한 csrf 및 xsrf 보호를 자동으로 처리하는 등의 기능을 제공함

4.jquery ajax
기존 xhr과 유사한 방식으로 요청을 보내고 비동기적 요청을 처리하기 위해 success()와 error()콜백함수를 이용ㅎ
간단히 말해
xhr과 fetch 는 기본적인http 요청을 ㅂ보내는 방법
axios는 더 간편한 http 요청처리를 제공하며
jquery ajax 는 jquery라이브러리 사용 시 일관된 방식으로 ajax 요청을 처리하느 방법